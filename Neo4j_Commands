#
# Quelle: https://www.youtube.com/watch?v=3VHgmB0SPxQ 
#


#
# Erstellen von 2 Nodes die miteinander gegenseitig verbunden sind:
#
create (x:Person {name:"Peter"}) – [:TEAM_MEMBER_OF] -> (y:Person {name:"Fabio"}) – [:BOSS_OF] -> (x)
return x,y


#
# Suchen eines bestehenden Nodes, Erstellen einer Verbindung zu einem neuen Nodes:
#
match (x:Person {name:"Fabio"}) 
create (x) – [:TEAM_MEMBER_OF] -> (y:Person {name:"Dordaneh"})
return x,y 


#
# Verbinden von zwei vorhandenen Nodes:
#
match (x:Person {name:"Dordaneh"})
match (y:Person {name:"Fabio"})
create (x) – [:BOSS_OF] -> (y)
return x,y 


#
# Anzeigen aller «Boss»-Beziehungen:
#
match (x) – [:BOSS_OF] – (y)
return x,y 


#
# Erstellen eines neuen Nodes und diesen gegenseitig verbinden mit bestehendem Node:
#
match (x:Person {name:"Fabio"})
create (y:Person {name:"Mark"}) – [:TEAM_MEMBER_OF] -> (x) – [:BOSS_OF] -> (y)
return x,y


#
# Von wem ist Fabio der Boss:
#
match (y:Person {name:"Fabio"})
match (x) <– [:BOSS_OF] - (y)
return x


#
# Wer ist der Boss von Fabio:
#
match (y:Person {name:"Fabio"})
match (x) – [:BOSS_OF] -> (y)
return x


#
# Löschen einer konkreten Beziehung zwischen zwei konkreten Nodes:
#
match (:Person {name:"Fabio"}) - [r:TEAM_MEMBER_OF] -> (:Person {name:"Dordaneh"})
delete r 

match (:Person {name:"Fabio"}) <- [r:BOSS_OF] - (:Person {name:"Dordaneh"})
delete r 


#
# Löschen der ganzen Datenbank:
#
match (n)
detach delete n 


#
# Löschen eines doppelten Nodes mit all seinen Beziehungen:
#
MATCH (p:Person {name:"Dordaneh"})
WITH p.id as id, collect(p) AS nodes 
WHERE size(nodes) >  1
FOREACH (p in tail(nodes) | DETACH DELETE p)


